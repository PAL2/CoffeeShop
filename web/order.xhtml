<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
>
<h:head>
    <title>#{msg['order']}</title>
</h:head>

<body>
<h:form>

    <h:outputLabel value="#{msg['variety']}"/>
    <br/>
    <p:selectOneMenu value="#{order.price}" id="price">
        <f:selectItems value="#{coffeeVariety.coffeeVarieties}" var="variety"
                       itemLabel="#{variety.name}" itemValue="#{variety.price}"/>
        <f:ajax listener="#{order.changeCost}" execute="@this deliveryCost amount" render="cost"/>
    </p:selectOneMenu>

    <h:selectOneRadio value="#{order.deliveryCost}" id="deliveryCost">
        <f:selectItems value="#{delivery.deliveries}" var="delivery"
                       itemLabel="#{delivery.name}" itemValue="#{delivery.cost}"/>
        <f:ajax listener="#{order.changeCost}" execute="@this price amount" render="cost"/>
    </h:selectOneRadio>

    <h:outputLabel value="#{msg['amount']}"/>
    <br/>
    <p:inputNumber id="amount" value="#{order.amount}" decimalSeparator="." validator="amountValidator">
    <f:ajax listener="#{order.changeCost}" execute="@this price deliveryCost" render="cost"/>
    </p:inputNumber>
    <p:messages for="amount" styleClass="error" autoUpdate="true"/>

    <h:outputLabel value="#{msg['date']}"/>
    <br/>
    <p:calendar value="#{order.date}" mindate="new Date()" pattern="dd-MM-yyyy"/>
    <br/>

    <h:outputLabel value="#{msg['from']}"/>
    <br/>
    <p:calendar value="#{order.timeFrom}" timeOnly="true" pattern="HH:mm" validator="#{order.validateTimeFrom}"/>
    <br/>

    <h:outputLabel value="#{msg['to']}"/>
    <br/>
    <p:calendar id="timeTo" value="#{order.timeTo}" timeOnly="true" pattern="HH:mm"
                validator="#{order.validateTimeTo}"/>
    <br/>

    <p:messages for="timeTo" styleClass="error" autoUpdate="true"/>

    <h:outputLabel value="#{msg['cost']}"/>
    <br/>
    <h:outputText id="cost" value="#{order.cost}"/>#{msg['currency']}
    <br/>

    <p:commandButton value="#{msg['to.order']}" action="#{order.goOrders}"/>

</h:form>

</body>
</html>